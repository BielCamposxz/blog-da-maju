@model perfilModel
@{
    Layout = "_LayoutPerfil";
}

<div class="profile-edit-bg py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6">

                <!-- CARD PRINCIPAL -->
                <div class="card profile-card p-5 rounded-5 position-relative">

                    <!-- AVATAR -->
                    <div class="text-center mb-5 position-relative">
                        <img id="avatarPreview" src="@Url.Action("ExibirFotoPerfil", "Perfil", new { id = Model.Id })"
                             alt="Foto de perfil de @(Model.NomeUsuario)"
                             class="rounded-circle avatar-profile shadow-lg">
                        <label for="avatarInput" class="change-photo-btn">Alterar</label>
                     
                    </div>

                    <!-- FORMULÁRIO -->
                    <form asp-controller="Perfil" asp-action="EnviarPerfil" method="post" enctype="multipart/form-data">
                        <input type="hidden" asp-for="Id" />
                            <input type="file" name="arquivo" id="avatarInput" name="arquivo" class="d-none" accept="image/*" onchange="previewImage(event)">

                        <!-- Nome de usuário -->
                        <div class="mb-4">
                            <label asp-for="NomeUsuario" class="form-label fw-semibold">Nome de usuário</label>
                            <input asp-for="NomeUsuario" class="form-control form-control-lg" placeholder="Digite seu nome" />
                        </div>

                        <!-- Botão salvar -->
                        <div class="d-grid">
                            <button type="submit" class="btn btn-gradient btn-lg fw-bold rounded-pill">
                                Salvar
                            </button>
                        </div>
                    </form>

                </div>

            </div>
        </div>
    </div>
</div>

<style>
    /* FUNDO */
    .profile-edit-bg {
        background: linear-gradient(160deg, #FF85A1 0%, #B49BE5 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
    }

    /* CARD */
    .profile-card {
        background-color: #fff;
        box-shadow: 0 16px 50px rgba(0,0,0,0.18);
        transition: transform 0.4s ease, box-shadow 0.4s ease;
    }

        .profile-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 22px 60px rgba(0,0,0,0.2);
        }

    /* AVATAR */
    .avatar-profile {
        width: 150px;
        height: 150px;
        object-fit: cover;
        border: 4px solid #fff;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        .avatar-profile:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(180,155,229,0.6);
        }

    /* BOTÃO ALTERAR FOTO */
    .change-photo-btn {
        position: absolute;
        bottom: -5px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, #FF85A1 0%, #B49BE5 100%);
        color: #fff;
        padding: 6px 18px;
        font-size: 0.85rem;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 600;
        box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        .change-photo-btn:hover {
            transform: translateX(-50%) scale(1.1);
            box-shadow: 0 6px 18px rgba(180,155,229,0.45);
        }

    /* INPUTS */
    .form-control {
        background-color: #fafafa;
        border: 1px solid #ddd;
        border-radius: 12px;
        padding: 14px 16px;
        font-size: 1rem;
        transition: border-color 0.3s, box-shadow 0.3s;
    }

        .form-control:focus {
            border-color: #B49BE5;
            box-shadow: 0 0 0 0.3rem rgba(180,155,229,0.25);
        }

    /* BOTÃO SALVAR */
    .btn-gradient {
        background: linear-gradient(135deg, #FF85A1 0%, #B49BE5 100%);
        color: #fff;
        border: none;
        font-weight: 600;
        padding: 14px 0;
        transition: transform 0.3s, box-shadow 0.3s, background-position 0.5s;
        background-size: 200% 200%;
        background-position: left center;
    }

        .btn-gradient:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(180,155,229,0.5);
            background-position: right center;
        }

    /* RESPONSIVIDADE */

    .profile-card {
        padding: 3rem 2rem;
    }

    }
</style>

<script>
    function previewImage(event) {
        const input = event.target;
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('avatarPreview').src = e.target.result;
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
</script>
