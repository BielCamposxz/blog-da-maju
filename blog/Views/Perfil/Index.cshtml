@model PerfilPostModel
@{
    Layout = "_LayoutPerfil";
    ViewData["Title"] = "Perfil";
}

<div class="container py-4">

    <header class="position-relative">
        <div class="w-100 rounded-bottom shadow-sm"
             style="height: 220px; background: linear-gradient(135deg, #ff80ab 0%, #9575cd 100%);">
        </div>

        <div class="position-absolute start-50 translate-middle-x perfil-foto-wrapper" style="bottom: -65px;">
            <div class="rounded-circle border border-4 border-white overflow-hidden shadow-sm perfil-foto">
                <img src="@Url.Action("ExibirFotoPerfil", "Perfil", new { id = Model.Perfil.Id })"
                     alt="Foto de perfil de @(Model.Perfil.NomeUsuario)"
                     class="w-100 h-100 object-fit-cover">
            </div>
        </div>
    </header>

    <div class="text-center" style="margin-top: 80px;">
        <h2 class="fw-bold">@Model.Perfil.NomeUsuario</h2>
        <div class="text-muted mb-3">
            <span><strong>@Model.Posts.Count</strong> publicações</span>
        </div>
        <div class="d-flex justify-content-center gap-2 flex-wrap mb-4">
            <a asp-action="Editar" asp-controller="Perfil" class="btn btn-outline-secondary rounded-pill px-4">
                <i class="bi bi-pencil-square me-1"></i> Editar Perfil
            </a>
            <a asp-action="Postar" asp-controller="Perfil" class="btn btn-primary rounded-pill px-4">
                <i class="bi bi-plus-lg me-1"></i> Nova Postagem
            </a>
        </div>
    </div>

    <!-- GRID DE POSTS -->
    <section class="mt-3">
        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-3">
            @foreach (var post in Model.Posts)
            {
                <div class="col">
                    <div class="card border-0 rounded-3 overflow-hidden position-relative post-card">
                        <div class="ratio ratio-1x1">
                            <img src='@Url.Action("Exibir", "Perfil", new { id = post.Id })'
                                 alt="Post"
                                 class="card-img-top post-img">
                        </div>
                        <div class="overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center text-white fs-5">
                            <span><i class="bi bi-heart-fill me-1 text-danger"></i> @post.Likes</span>
                        </div>
                    </div>
                </div>

            }
        </div>
    </section>

</div>
